#!/usr/bin/env python
#
# generates a table of 256 values, where certain characters are
# marked "interesting" for the uri parsing process.
#
# USAGE:
#   $ gen-uri-delims.py > uri/uri_delims.h
#
# typically invoked by the "buildconf" script
#

import sys
import string
write = sys.stdout.write

write('/* this file is automatically generated by gen-uri-delims.py, '
      'do not edit */\n')
write('static const unsigned char uri_delims[256] = {')

values = [ '0' ] * 256
values[ord(':')] = 'T_COLON'
values[ord('/')] = 'T_SLASH'
values[ord('?')] = 'T_QUESTION'
values[ord('#')] = 'T_HASH'
values[0] = 'T_NUL'

while values:
  write('\n    %s' % string.join(values[:20], ','))
  del values[:20]
  if values:
    write(',')

write('\n};\n')
